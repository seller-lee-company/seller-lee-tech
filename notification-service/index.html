<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e3ca7fb2adcef8ecde0f.css">@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}[data-rmiz-wrap=hidden],[data-rmiz-wrap=visible]{position:relative;display:inline-flex;align-items:flex-start}[data-rmiz-wrap=hidden]{visibility:hidden}[data-rmiz-overlay]{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;transition-property:background-color}[data-rmiz-btn-close],[data-rmiz-btn-open]{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:0;padding:0;border:none;border-radius:0;font:inherit;color:inherit;background:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}[data-rmiz-btn-open]{cursor:zoom-in}[data-rmiz-btn-close]{cursor:zoom-out}[data-rmiz-modal-content]{position:absolute;transition-property:transform;transform-origin:center center}</style><meta name="generator" content="Gatsby 2.24.7"/><title data-react-helmet="true">알림 서비스 적용기</title><meta data-react-helmet="true" charSet="utf-8"/><meta data-react-helmet="true" http-equiv="X-UA-Compatible" content="IE=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" name="theme-color" content="#fff"/><meta data-react-helmet="true" itemProp="name" content="알림 서비스 적용기"/><meta data-react-helmet="true" itemProp="description" content="들어가며 안녕하세요. 셀러리컴퍼니의 팀장 터틀입니다. 직고래 2.0.…"/><meta data-react-helmet="true" itemProp="image" content="https://seller-lee.github.io/static/d167f0b6a79946fbaf7b6e33bd1e40dc/3bf7d/notification-service.jpg"/><meta data-react-helmet="true" name="description" content="들어가며 안녕하세요. 셀러리컴퍼니의 팀장 터틀입니다. 직고래 2.0.…"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="Jikgorae"/><meta data-react-helmet="true" name="twitter:title" content="알림 서비스 적용기"/><meta data-react-helmet="true" name="twitter:description" content="들어가며 안녕하세요. 셀러리컴퍼니의 팀장 터틀입니다. 직고래 2.0.…"/><meta data-react-helmet="true" name="twitter:creator"/><meta data-react-helmet="true" name="twitter:image" content="https://seller-lee.github.io/static/d167f0b6a79946fbaf7b6e33bd1e40dc/3bf7d/notification-service.jpg"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="알림 서비스 적용기"/><meta data-react-helmet="true" property="og:url" content="https://seller-lee.github.io/notification-service"/><meta data-react-helmet="true" property="og:image" content="https://seller-lee.github.io/static/d167f0b6a79946fbaf7b6e33bd1e40dc/3bf7d/notification-service.jpg"/><meta data-react-helmet="true" property="og:description" content="들어가며 안녕하세요. 셀러리컴퍼니의 팀장 터틀입니다. 직고래 2.0.…"/><meta data-react-helmet="true" property="og:site_name" content="Jikgorae"/><meta data-react-helmet="true" name="article:published_time" content="September 21st, 2020"/><meta data-react-helmet="true" name="twitter:label1" value="Reading time"/><meta data-react-helmet="true" name="twitter:data1" value="3 min read"/><script data-react-helmet="true" type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://seller-lee.github.io/#organization","name":"직고래 기술 블로그","url":"https://seller-lee.github.io","sameAs":["undefined","https://github.com/seller-lee","undefined","undefined"],"logo":{"@type":"ImageObject","@id":"https://seller-lee.github.io/#logo","inLanguage":"en-US","url":"https://seller-lee.github.io/icons/icon-512x512.png","width":512,"height":512,"caption":"직고래 기술 블로그"},"image":{"@id":"https://seller-lee.github.io/#logo"}},{"@type":"WebSite","@id":"https://seller-lee.github.io/#website","url":"https://seller-lee.github.io","name":"Jikgorae","description":"직고래의 기술 블로그입니다.","publisher":{"@id":"https://seller-lee.github.io/#organization"},"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://seller-lee.github.io/notification-service/#primaryimage","inLanguage":"en-US","url":"https://seller-lee.github.io/static/d167f0b6a79946fbaf7b6e33bd1e40dc/3bf7d/notification-service.jpg","width":1200,"height":628},{"@type":["WebPage"],"@id":"https://seller-lee.github.io/notification-service/#webpage","url":"https://seller-lee.github.io/notification-service","name":"알림 서비스 적용기","isPartOf":{"@id":"https://seller-lee.github.io/#website"},"primaryImageOfPage":{"@id":"https://seller-lee.github.io/notification-service/#primaryimage"},"datePublished":"2020-09-21T00:00:00.000Z","dateModified":"2020-09-21T00:00:00.000Z","description":"들어가며 안녕하세요. 셀러리컴퍼니의 팀장 터틀입니다. 직고래 2.0.…","breadcrumb":{"@id":"https://seller-lee.github.io/notification-service/#breadcrumb"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","@id":"https://seller-lee.github.io/notification-service/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://seller-lee.github.io","url":"https://seller-lee.github.io","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://seller-lee.github.io/notification-service","url":"https://seller-lee.github.io/notification-service","name":"알림 서비스 적용기"}}]},{"@type":"Article","@id":"https://seller-lee.github.io/notification-service/#article","isPartOf":{"@id":"https://seller-lee.github.io/notification-service/#webpage"},"author":{"@id":"https://seller-lee.github.io/#/schema/authors/yoonseo-nam"},"headline":"알림 서비스 적용기","datePublished":"2020-09-21T00:00:00.000Z","dateModified":"2020-09-21T00:00:00.000Z","mainEntityOfPage":{"@id":"https://seller-lee.github.io/notification-service/#webpage"},"publisher":{"@id":"https://seller-lee.github.io/#organization"},"image":{"@id":"https://seller-lee.github.io/notification-service/#primaryimage"},"inLanguage":"en-US"},{"@type":["Person"],"@id":"https://seller-lee.github.io/#/schema/authors/yoonseo-nam","name":"Yoonseo Nam","image":{"@type":"ImageObject","@id":"https://seller-lee.github.io/#personlogo","inLanguage":"en-US","caption":"Yoonseo Nam"},"description":"Seller. Lee Company's Team Leader
","sameAs":["undefined","https://github.com/seller-lee","undefined","undefined"]}]}</script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=5dcf8558103d007f628351918695a98b"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#fff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=5dcf8558103d007f628351918695a98b"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=5dcf8558103d007f628351918695a98b"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=5dcf8558103d007f628351918695a98b"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=5dcf8558103d007f628351918695a98b"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=5dcf8558103d007f628351918695a98b"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=5dcf8558103d007f628351918695a98b"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=5dcf8558103d007f628351918695a98b"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=5dcf8558103d007f628351918695a98b"/><link as="script" rel="preload" href="/webpack-runtime-0d172aad282cdfaa4c43.js"/><link as="script" rel="preload" href="/framework-4c4e0d69aebda0f2dfad.js"/><link as="script" rel="preload" href="/532a2f07-e098f9f49d7a6a9ea439.js"/><link as="script" rel="preload" href="/app-a80bd43fd08f08e96ede.js"/><link as="script" rel="preload" href="/styles-c2fe8482057191dca484.js"/><link as="script" rel="preload" href="/044b48a8-21ca9a5926eae6d84c26.js"/><link as="script" rel="preload" href="/commons-a609edef06c7fdd2acf9.js"/><link as="script" rel="preload" href="/d59818a277a63e94f3957e3702ab9a81b507562b-26408c2c92434787bfd3.js"/><link as="script" rel="preload" href="/component---src-narative-gatsby-theme-novela-templates-article-template-tsx-ac32e6317640f5d0a7d7.js"/><link as="fetch" rel="preload" href="/page-data/notification-service/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/1143375668.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/1491088328.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/1921650733.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/2068910035.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/2444214635.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="acmv4e">body{--theme-ui-colors-prism-token:var(--theme-ui-colors-prism-token,#fff);--theme-ui-colors-prism-languageJavascript:var(--theme-ui-colors-prism-languageJavascript,#e8696b);--theme-ui-colors-prism-javascript:var(--theme-ui-colors-prism-javascript,#e8696b);--theme-ui-colors-prism-background:var(--theme-ui-colors-prism-background,#292c34);--theme-ui-colors-prism-comment:var(--theme-ui-colors-prism-comment,#5e6a76);--theme-ui-colors-prism-string:var(--theme-ui-colors-prism-string,#a8e2a8);--theme-ui-colors-prism-var:var(--theme-ui-colors-prism-var,#b3bac5);--theme-ui-colors-prism-number:var(--theme-ui-colors-prism-number,#e4854d);--theme-ui-colors-prism-constant:var(--theme-ui-colors-prism-constant,#b3bac5);--theme-ui-colors-prism-plain:var(--theme-ui-colors-prism-plain,#fff);--theme-ui-colors-prism-doctype:var(--theme-ui-colors-prism-doctype,#e8696b);--theme-ui-colors-prism-tag:var(--theme-ui-colors-prism-tag,#e8696b);--theme-ui-colors-prism-keyword:var(--theme-ui-colors-prism-keyword,#d49fd4);--theme-ui-colors-prism-boolean:var(--theme-ui-colors-prism-boolean,#ff5874);--theme-ui-colors-prism-function:var(--theme-ui-colors-prism-function,#5F8DC3);--theme-ui-colors-prism-parameter:var(--theme-ui-colors-prism-parameter,#F9965D);--theme-ui-colors-prism-className:var(--theme-ui-colors-prism-className,#ffcf74);--theme-ui-colors-prism-attrName:var(--theme-ui-colors-prism-attrName,#bf87ba);--theme-ui-colors-prism-attrValue:var(--theme-ui-colors-prism-attrValue,#a8e2a8);--theme-ui-colors-prism-interpolation:var(--theme-ui-colors-prism-interpolation,#fff);--theme-ui-colors-prism-punctuation:var(--theme-ui-colors-prism-punctuation,#5FA8AA);--theme-ui-colors-prism-maybe-class-name:var(--theme-ui-colors-prism-maybe-class-name,#fff);--theme-ui-colors-prism-property:var(--theme-ui-colors-prism-property,#80cbc4);--theme-ui-colors-prism-propertyAccess:var(--theme-ui-colors-prism-propertyAccess,#fff);--theme-ui-colors-prism-namespace:var(--theme-ui-colors-prism-namespace,#b2ccd6);--theme-ui-colors-prism-highlight:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));--theme-ui-colors-prism-highlightBorder:var(--theme-ui-colors-prism-highlightBorder,#e1bde2);--theme-ui-colors-prism-dom:var(--theme-ui-colors-prism-dom,#5F8DC3);--theme-ui-colors-prism-operator:var(--theme-ui-colors-prism-operator,#5FA8AA);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#000);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#73737D);--theme-ui-colors-grey:var(--theme-ui-colors-grey,#73737D);--theme-ui-colors-background:var(--theme-ui-colors-background,#fafafa);--theme-ui-colors-accent:var(--theme-ui-colors-accent,#6166DC);--theme-ui-colors-hover:var(--theme-ui-colors-hover,rgba(0,0,0,0.07));--theme-ui-colors-gradient:var(--theme-ui-colors-gradient,linear-gradient(180deg,rgba(217,219,224,0) 0%,#D9DBE0 100%));--theme-ui-colors-articleText:var(--theme-ui-colors-articleText,#08080B);--theme-ui-colors-track:var(--theme-ui-colors-track,rgba(8,8,11,0.3));--theme-ui-colors-progress:var(--theme-ui-colors-progress,#000);--theme-ui-colors-card:var(--theme-ui-colors-card,#fff);--theme-ui-colors-error:var(--theme-ui-colors-error,#EE565B);--theme-ui-colors-success:var(--theme-ui-colors-success,#46B17B);--theme-ui-colors-errorBackground:var(--theme-ui-colors-errorBackground,rgba(238,86,91,0.1));--theme-ui-colors-horizontalRule:var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));--theme-ui-colors-inputBackground:var(--theme-ui-colors-inputBackground,rgba(0,0,0,0.05));color:var(--theme-ui-colors-text,undefined);background-color:var(--theme-ui-colors-background,var(--theme-ui-colors-background,#fafafa));}body.theme-ui-dark{--theme-ui-colors-grey:var(--theme-ui-colors-modes-dark-grey,#73737D);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#fff);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#fff);--theme-ui-colors-accent:var(--theme-ui-colors-modes-dark-accent,#E9DAAC);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#111216);--theme-ui-colors-hover:var(--theme-ui-colors-modes-dark-hover,rgba(255,255,255,0.07));--theme-ui-colors-gradient:var(--theme-ui-colors-modes-dark-gradient,linear-gradient(180deg,#111216 0%,rgba(66,81,98,0.36) 100%));--theme-ui-colors-articleText:var(--theme-ui-colors-modes-dark-articleText,#fff);--theme-ui-colors-track:var(--theme-ui-colors-modes-dark-track,rgba(255,255,255,0.3));--theme-ui-colors-progress:var(--theme-ui-colors-modes-dark-progress,#fff);--theme-ui-colors-card:var(--theme-ui-colors-modes-dark-card,#1D2128);--theme-ui-colors-error:var(--theme-ui-colors-modes-dark-error,#EE565B);--theme-ui-colors-success:var(--theme-ui-colors-modes-dark-success,#46B17B);--theme-ui-colors-errorBackground:var(--theme-ui-colors-modes-dark-errorBackground,rgba(238,86,91,0.1));--theme-ui-colors-horizontalRule:var(--theme-ui-colors-modes-dark-horizontalRule,rgba(255,255,255,0.15));--theme-ui-colors-inputBackground:var(--theme-ui-colors-modes-dark-inputBackground,rgba(255,255,255,0.07));}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1birv2v">.css-1birv2v{position:relative;background:var(--theme-ui-colors-background,#fafafa);-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);min-height:100vh;}</style><div class="css-1birv2v e16irp4g0"><style data-emotion-css="9kzas7">:root{--ease-in-quad:cubic-bezier(0.55,0.085,0.68,0.53);--ease-in-quart:cubic-bezier(0.895,0.03,0.685,0.22);--ease-out-quad:cubic-bezier(0.25,0.46,0.45,0.94);--ease-out-quart:cubic-bezier(0.165,0.84,0.44,1);--ease-in-out-quad:cubic-bezier(0.455,0.03,0.515,0.955);--ease-in-out-quart:cubic-bezier(0.77,0,0.175,1);}@font-face{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Noto Sans KR","Segoe UI","Arial",sans-serif;font-weight:400;font-style:normal;}*,*:before,*:after{box-sizing:inherit;margin:0;padding:0;font-size:inherit;font-display:block;}:root{-ms-overflow-style:-ms-autohiding-scrollbar;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;cursor:default;font-size:0.625rem;line-height:1.4;}body{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Noto Sans KR","Segoe UI","Arial",sans-serif;font-size:1.6rem;margin:0;font-weight:400;height:100%;}article{word-break:break-word;}button,a{-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}a:focus{outline:none;}audio,canvas,iframe,img,svg,video{vertical-align:middle;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}input,textarea,select,button{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Noto Sans KR","Segoe UI","Arial",sans-serif;}.underline{-webkit-text-decoration:underline;text-decoration:underline;}button,input,select,textarea{color:inherit;font-family:inherit;font-style:inherit;font-weight:inherit;}code,kbd,pre,samp{font-family:monospace;}fieldset,button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;outline:none;background:transparent;}table{border-collapse:separate;border-spacing:0;}audio:not([controls]){display:none;}details{display:block;}input:focus,input:active{outline:none;}input[type="number"]{width:auto;}img.Image__Zoom ~ div{background:transparent !important;}</style><style data-emotion-css="il8sto">.css-il8sto{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;}@media (max-width:66.875em){.css-il8sto{max-width:850px;}}@media (max-width:45.9375em){.css-il8sto{padding:0 4rem;max-width:567px;}}@media (max-width:33.75em){.css-il8sto{max-width:100%;}}</style><section class="css-il8sto e7po90t0"><style data-emotion-css="vaq2uo">.css-vaq2uo{position:relative;z-index:100;padding-top:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:80em){.css-vaq2uo{padding-top:50px;}}@media screen and (max-height:800px){.css-vaq2uo{padding-top:50px;}}</style><div class="css-vaq2uo e1m4jzoz1"><style data-emotion-css="15p801d">.css-15p801d{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;left:0;}@media (max-width:80em){.css-15p801d{left:0;}}.css-15p801d[data-a11y="true"]:focus::after{content:"";position:absolute;left:-10%;top:-30%;width:120%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}.css-15p801d:hover .e1m4jzoz0{-webkit-transform:translateX(-3px);-ms-transform:translateX(-3px);transform:translateX(-3px);}</style><a data-a11y="false" title="Navigate back to the homepage" aria-label="Navigate back to the homepage" back="false" class="css-15p801d e1m4jzoz2" href="/"><style data-emotion-css="rk6qdu">.css-rk6qdu .Logo__Mobile{display:none;}@media (max-width:45.9375em){.css-rk6qdu .Logo__Desktop{display:none;}.css-rk6qdu .Logo__Mobile{display:block;}}</style><div class="css-rk6qdu e1e8om060"><style data-emotion-css="1xsfzc9">.css-1xsfzc9{font-weight:900;color:#395FC1;font-family:"Noto Sans KR";word-break:keep-all;font-size:32px;line-height:1.333;}@media (max-width:66.875em){.css-1xsfzc9{font-size:21px;}}@media (max-width:45.9375em){.css-1xsfzc9{font-size:24px;line-height:1.45;}}@media (max-width:33.75em){.css-1xsfzc9{font-size:22px;}}</style><h2 class="Logo__Desktop css-1xsfzc9 efq1zb26">직고래<style data-emotion-css="m6dz0t">.css-m6dz0t{font-weight:600;color:lightgray;font-family:"Noto Sans KR";word-break:keep-all;font-size:32px;line-height:1.333;}@media (max-width:66.875em){.css-m6dz0t{font-size:21px;}}@media (max-width:45.9375em){.css-m6dz0t{font-size:24px;line-height:1.45;}}@media (max-width:33.75em){.css-m6dz0t{font-size:22px;}}</style><h2 class="css-m6dz0t efq1zb27">기술 블로그</h2></h2><style data-emotion-css="1bty9jv">.css-1bty9jv{font-weight:900;color:#395FC1;font-family:"Noto Sans KR",sans-serif;word-break:keep-all;font-size:24px;line-height:1.45;}@media (max-width:45.9375em){.css-1bty9jv{font-size:22px;}}@media (max-width:33.75em){.css-1bty9jv{font-size:20px;}}</style><h4 class="Logo__Mobile css-1bty9jv efq1zb28">직고래<style data-emotion-css="1ys3af1">.css-1ys3af1{font-weight:600;color:lightgray;font-family:"Noto Sans KR",sans-serif;word-break:keep-all;font-size:24px;line-height:1.45;}@media (max-width:45.9375em){.css-1ys3af1{font-size:22px;}}@media (max-width:33.75em){.css-1ys3af1{font-size:20px;}}</style><h4 class="css-1ys3af1 efq1zb29">기술 블로그</h4></h4></div><style data-emotion-css="10l5b14">.css-10l5b14{position:absolute;display:inline-block;opacity:0;width:0px;height:0px;visibility:hidden;overflow:hidden;}</style><span class="css-10l5b14 e1m4jzoz8">Navigate back to the homepage</span></a><style data-emotion-css="1qdrnpx">.css-1qdrnpx{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:33.75em){.css-1qdrnpx{right:-5px;}}</style><div class="css-1qdrnpx e1m4jzoz3"><style data-emotion-css="4zc6l3">.css-4zc6l3{opacity:0.5;position:relative;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;margin-left:30px;}.css-4zc6l3:hover{opacity:1;}.css-4zc6l3[data-a11y="true"]:focus::after{content:"";position:absolute;left:0;top:-30%;width:100%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}@media (max-width:45.9375em){.css-4zc6l3{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-transform:scale(0.708);-ms-transform:scale(0.708);transform:scale(0.708);margin-left:10px;}.css-4zc6l3:hover{opacity:0.5;}}</style><button data-a11y="false" aria-label="Copy URL to clipboard" title="Copy URL to clipboard" class="css-4zc6l3 e1m4jzoz5"><svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2H14C15.6567 2 17 3.34328 17 5V9C17 10.6567 15.6567 12 14 12H10C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14H14C16.7613 14 19 11.7613 19 9V5C19 2.23872 16.7613 0 14 0H5C2.23872 0 0 2.23872 0 5V9C0 10.4938 0.656313 11.8361 1.6935 12.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625C3.47028 12.2483 3.43068 11.6164 3.0165 11.2511C2.39169 10.6999 2 9.89621 2 9V5ZM7 11C7 9.34328 8.34328 8 10 8H14C14.5523 8 15 7.55228 15 7C15 6.44772 14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11V15C5 17.7613 7.23872 20 10 20H19C21.7613 20 24 17.7613 24 15V11C24 9.50621 23.3437 8.16393 22.3065 7.24906C21.8923 6.88372 21.2604 6.92332 20.8951 7.3375C20.5297 7.75168 20.5693 8.38361 20.9835 8.74894C21.6083 9.30007 22 10.1038 22 11V15C22 16.6567 20.6567 18 19 18H10C8.34328 18 7 16.6567 7 15V11Z" fill="#000"></path></svg><style data-emotion-css="16kvgc5">.css-16kvgc5{position:absolute;padding:4px 13px;background:rgba(0,0,0,0.1);color:#000;border-radius:5px;font-size:14px;top:-35px;opacity:0;-webkit-transform:none;-ms-transform:none;transform:none;-webkit-transition:-webkit-transform 0.3s ease-in-out,opacity 0.3s ease-in-out;-webkit-transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;}.css-16kvgc5::after{content:"";position:absolute;left:0;right:0;bottom:-6px;margin:0 auto;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid rgba(0,0,0,0.1);}</style><div class="css-16kvgc5 e1m4jzoz4">Copied</div></button><button data-a11y="false" aria-label="Activate dark mode" title="Activate dark mode" class="css-4zc6l3 e1m4jzoz5"><style data-emotion-css="jmdf3f">.css-jmdf3f{position:relative;width:24px;height:24px;border-radius:50%;border:2px solid var(--theme-ui-colors-primary,#000);background:var(--theme-ui-colors-primary,#000);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:all 0.45s ease;transition:all 0.45s ease;overflow:hidden;}.css-jmdf3f::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-primary,#000);border-radius:50%;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease;-webkit-transition:transform 0.45s ease;transition:transform 0.45s ease;}.css-jmdf3f::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-primary,#000),0 23px 0 var(--theme-ui-colors-primary,#000),23px 0 0 var(--theme-ui-colors-primary,#000),-23px 0 0 var(--theme-ui-colors-primary,#000),15px 15px 0 var(--theme-ui-colors-primary,#000),-15px 15px 0 var(--theme-ui-colors-primary,#000),15px -15px 0 var(--theme-ui-colors-primary,#000),-15px -15px 0 var(--theme-ui-colors-primary,#000);-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:all 0.35s ease;transition:all 0.35s ease;}@media (max-width:45.9375em){.css-jmdf3f::after{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}}</style><div class="css-jmdf3f e1m4jzoz6"></div><style data-emotion-css="1k5uyy5">.css-1k5uyy5{position:absolute;right:-1px;top:-8px;height:24px;width:24px;border-radius:50%;border:0;background:var(--theme-ui-colors-background,#fafafa);-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),-webkit-transform 0.45s ease;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),transform 0.45s ease;transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),transform 0.45s ease;}</style><div class="css-1k5uyy5 e1m4jzoz7"></div></button></div></div></section><style data-emotion-css="wn0kt9">@media (max-width:33.75em){.css-wn0kt9::before{content:"";width:100%;height:20px;background:var(--theme-ui-colors-primary,#000);position:absolute;left:0;top:0;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}.css-wn0kt9::after{content:"";width:100%;height:10px;background:var(--theme-ui-colors-background,#fafafa);position:absolute;left:0;top:10px;border-top-left-radius:25px;border-top-right-radius:25px;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}}</style><div class="css-wn0kt9 efpmxor0"><style data-emotion-css="1ito37z">.css-1ito37z{position:relative;z-index:10;margin:100px auto 120px;padding-left:68px;max-width:749px;}@media (max-width:66.875em){.css-1ito37z{padding-left:53px;max-width:calc(507px + 53px);margin:100px auto 70px;}}@media (max-width:45.9375em){.css-1ito37z{padding-left:0;margin:100px auto 70px;max-width:480px;}}@media (max-width:33.75em){.css-1ito37z{margin:170px auto 180px;padding:0 40px;}}@media screen and (max-height:700px){.css-1ito37z{margin:100px auto;}}</style><header class="css-1ito37z efpmxor2"><style data-emotion-css="1fu6lzh">.css-1fu6lzh{word-break:keep-all;font-size:52px;line-height:1.15;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;font-size:48px;font-family:'Merriweather',Georgia,Serif;margin-bottom:25px;font-weight:bold;line-height:1.32;}@media (max-width:66.875em){.css-1fu6lzh{font-size:38px;line-height:1.2;}}@media (max-width:33.75em){.css-1fu6lzh{font-size:32px;line-height:1.3;}}@media (max-width:45.9375em){.css-1fu6lzh{margin-bottom:20px;font-size:36px;}}@media (max-width:33.75em){.css-1fu6lzh{font-size:32px;}}</style><h1 class="css-1fu6lzh efpmxor3">알림 서비스 적용기</h1><style data-emotion-css="sdvpri">.css-sdvpri{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:18px;color:var(--theme-ui-colors-grey,#73737D);}@media (max-width:33.75em){.css-sdvpri{font-size:14px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-sdvpri strong{display:block;font-weight:500;margin-bottom:5px;}}</style><div class="css-sdvpri efpmxor4"><style data-emotion-css="1mpu0fb">.css-1mpu0fb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;}.css-1mpu0fb strong{-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}.css-1mpu0fb:hover strong{color:var(--theme-ui-colors-primary,#000);}</style><a class="css-1mpu0fb e1j91cvq2" href="/authors/yoonseo-nam"><style data-emotion-css="u1pf06">.css-u1pf06{height:25px;width:25px;border-radius:50%;margin-right:14px;background:var(--theme-ui-colors-grey,#73737D);overflow:hidden;}.css-u1pf06 .gatsby-image-wrapper > div{padding-bottom:100% !important;}@media (max-width:33.75em){.css-u1pf06{display:none;}}</style><div class="css-u1pf06 e1j91cvq0"><style data-emotion-css="uodor8">.css-uodor8{border-radius:50%;}</style><style data-emotion-css="1qspsgn">.css-1qspsgn{border-radius:50%;}.css-1qspsgn > img{-webkit-filter:blur(8px);filter:blur(8px);}</style><div class="e1j91cvq1 css-1qspsgn eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABwZbOxHLippwpA//EABsQAAMBAAMBAAAAAAAAAAAAAAECAwAEEBEU/9oACAEBAAEFAgPSygDcNQXoismnVp76qdf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAaEAACAgMAAAAAAAAAAAAAAAABEABBESJh/9oACAEBAAY/AmSahHFriUv/xAAcEAACAgIDAAAAAAAAAAAAAAAAAREhEEExUfD/2gAIAQEAAT8hqJgrDc41uDjxhIbO0eKHbP/aAAwDAQACAAMAAAAQLAi8/8QAFhEAAwAAAAAAAAAAAAAAAAAAAREg/9oACAEDAQE/EAo//8QAFhEAAwAAAAAAAAAAAAAAAAAAAREg/9oACAECAQE/EC4//8QAHRABAAICAgMAAAAAAAAAAAAAAREhAEEQUTFx8P/aAAgBAQABPxAAUG3JZEaeEr6yO6xGF2DA+Ln3XFDdrJlabV9nFIwEswZ//9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/0b50edefbdcfc1f46f616ae551bd4d72/58718/turtle-nam.webp 13w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/74aad/turtle-nam.webp 25w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/e7b2c/turtle-nam.webp 50w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/ed320/turtle-nam.webp 75w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/66016/turtle-nam.webp 100w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/78a60/turtle-nam.webp 421w" sizes="(max-width: 50px) 100vw, 50px" /><source srcset="/static/0b50edefbdcfc1f46f616ae551bd4d72/afb2b/turtle-nam.jpg 13w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/7c20e/turtle-nam.jpg 25w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/fa1ea/turtle-nam.jpg 50w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/03612/turtle-nam.jpg 75w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/61cdf/turtle-nam.jpg 100w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/e4a98/turtle-nam.jpg 421w" sizes="(max-width: 50px) 100vw, 50px" /><img loading="lazy" sizes="(max-width: 50px) 100vw, 50px" srcset="/static/0b50edefbdcfc1f46f616ae551bd4d72/afb2b/turtle-nam.jpg 13w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/7c20e/turtle-nam.jpg 25w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/fa1ea/turtle-nam.jpg 50w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/03612/turtle-nam.jpg 75w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/61cdf/turtle-nam.jpg 100w,
/static/0b50edefbdcfc1f46f616ae551bd4d72/e4a98/turtle-nam.jpg 421w" src="/static/0b50edefbdcfc1f46f616ae551bd4d72/fa1ea/turtle-nam.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><strong>Yoonseo Nam</strong><style data-emotion-css="sjizha">@media (max-width:33.75em){.css-sjizha{display:none;}}</style><span class="css-sjizha e1j91cvq13">, </span></a><style data-emotion-css="1d64qrg">.css-1d64qrg{margin-left:0;}@media (max-width:33.75em){.css-1d64qrg{margin-left:0;}}</style><div class="css-1d64qrg efpmxor1">September 21st, 2020<!-- --> · <!-- -->3<!-- --> min read</div></div></header><style data-emotion-css="15rikwz">.css-15rikwz{position:relative;z-index:1;width:100%;max-width:944px;overflow:hidden;margin:0 auto;box-shadow:0 30px 60px -10px rgba(0,0,0,0.2),0 18px 36px -18px rgba(0,0,0,0.22);}@media (max-width:45.9375em){.css-15rikwz{max-width:100%;}}@media (max-width:33.75em){.css-15rikwz{margin:0 auto;width:calc(100vw - 40px);height:220px;}.css-15rikwz > div{height:220px;}}</style><div id="ArticleImage__Hero" class="css-15rikwz efpmxor5"><style data-emotion-css="133qvua">.css-133qvua > img{-webkit-filter:blur(8px);filter:blur(8px);}</style><div class="css-133qvua eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:64.40677966101696%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQCA//EABcBAAMBAAAAAAAAAAAAAAAAAAECAwT/2gAMAwEAAhADEAAAAbuae2WlkU//xAAYEAADAQEAAAAAAAAAAAAAAAABAhEAA//aAAgBAQABBQJRSaGx3ZmTmpq//8QAFxEBAAMAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPwEpyP/EABYRAAMAAAAAAAAAAAAAAAAAAAEQUf/aAAgBAgEBPwE1f//EABsQAAICAwEAAAAAAAAAAAAAAAABAhEQITFR/9oACAEBAAY/AqKx2iUk9ifqP//EAB0QAAICAQUAAAAAAAAAAAAAAAABESFBEDFRgaH/2gAIAQEAAT8h3Id2490R1EiyT9a20TfgZ//aAAwDAQACAAMAAAAQXw//xAAWEQEBAQAAAAAAAAAAAAAAAAABADH/2gAIAQMBAT8QJC2y/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/ENAif//EABsQAQADAQADAAAAAAAAAAAAAAERITEAEHGB/9oACAEBAAE/EBGiRvhIElNZE2zajwiTIkHW3QQGljPvOYhQPZ3/2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/d167f0b6a79946fbaf7b6e33bd1e40dc/77392/notification-service.webp 236w,
/static/d167f0b6a79946fbaf7b6e33bd1e40dc/1f177/notification-service.webp 472w,
/static/d167f0b6a79946fbaf7b6e33bd1e40dc/f461a/notification-service.webp 640w" sizes="(max-width: 640px) 100vw, 640px" /><source srcset="/static/d167f0b6a79946fbaf7b6e33bd1e40dc/e0f30/notification-service.jpg 236w,
/static/d167f0b6a79946fbaf7b6e33bd1e40dc/86afd/notification-service.jpg 472w,
/static/d167f0b6a79946fbaf7b6e33bd1e40dc/3bf7d/notification-service.jpg 640w" sizes="(max-width: 640px) 100vw, 640px" /><img loading="lazy" sizes="(max-width: 640px) 100vw, 640px" srcset="/static/d167f0b6a79946fbaf7b6e33bd1e40dc/e0f30/notification-service.jpg 236w,
/static/d167f0b6a79946fbaf7b6e33bd1e40dc/86afd/notification-service.jpg 472w,
/static/d167f0b6a79946fbaf7b6e33bd1e40dc/3bf7d/notification-service.jpg 640w" src="/static/d167f0b6a79946fbaf7b6e33bd1e40dc/3bf7d/notification-service.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></div><style data-emotion-css="145b7r6">.css-145b7r6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 auto;max-width:1140px;}@media (max-width:80em){.css-145b7r6{display:none;}}</style><aside class="css-145b7r6 e1mvde9i0"><style data-emotion-css="18dj233">.css-18dj233{position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);top:0px;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;height:100vh;z-index:3;opacity:0;visibility:hidden;-webkit-transition:opacity 0.2s linear,visibility 0.4s linear;transition:opacity 0.2s linear,visibility 0.4s linear;}</style><div class="css-18dj233 e1mvde9i1"><div><style data-emotion-css="155spwp">.css-155spwp{-webkit-user-select:initial;-moz-user-select:initial;-ms-user-select:initial;user-select:initial;pointer-events:initial;opacity:1;-webkit-transition:opacity 0.25s;transition:opacity 0.25s;}</style><div class="css-155spwp e12lgbtp0"><style data-emotion-css="1elne8e">.css-1elne8e{position:relative;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><div tabindex="-1" class="css-1elne8e e1nelaoe0"><style data-emotion-css="iefrkk">.css-iefrkk{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:calc(88vh - 40px);max-height:425px;width:1px;background-color:var(--theme-ui-colors-track,rgba(8,8,11,0.3));opacity:0.6;overflow:hidden;}</style><div aria-hidden="true" class="css-iefrkk e1nelaoe1"><style data-emotion-css="1qno6mr">.css-1qno6mr{position:absolute;height:100%;top:-100%;width:1px;background-color:var(--theme-ui-colors-progress,#000);left:0;}</style><div style="transform:translateY(0%)" class="css-1qno6mr e1nelaoe2"></div></div></div></div></div></div></aside><style data-emotion-css="19mic43">.css-19mic43{position:relative;padding-top:60px;-webkit-transition:background 0.2s linear;transition:background 0.2s linear;text-align:center;}@media (min-width:33.8125em){.css-19mic43{display:none;}}</style><div class="css-19mic43 eamsocw0"><style data-emotion-css="gmuwbf">.css-gmuwbf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><div class="css-gmuwbf e1yswbpi0"><style data-emotion-css="1yxfb37">.css-1yxfb37{opacity:0.5;position:relative;z-index:200000000;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;margin-left:30px;}.css-1yxfb37:hover{opacity:1;}@media (max-width:45.9375em){.css-1yxfb37{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-transform:scale(0.9);-ms-transform:scale(0.9);transform:scale(0.9);margin:0 15px;}.css-1yxfb37:hover{opacity:0.5;}}</style><button data-a11y="false" aria-label="Copy URL to clipboard" class="css-1yxfb37 e1yswbpi2"><svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2H14C15.6567 2 17 3.34328 17 5V9C17 10.6567 15.6567 12 14 12H10C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14H14C16.7613 14 19 11.7613 19 9V5C19 2.23872 16.7613 0 14 0H5C2.23872 0 0 2.23872 0 5V9C0 10.4938 0.656313 11.8361 1.6935 12.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625C3.47028 12.2483 3.43068 11.6164 3.0165 11.2511C2.39169 10.6999 2 9.89621 2 9V5ZM7 11C7 9.34328 8.34328 8 10 8H14C14.5523 8 15 7.55228 15 7C15 6.44772 14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11V15C5 17.7613 7.23872 20 10 20H19C21.7613 20 24 17.7613 24 15V11C24 9.50621 23.3437 8.16393 22.3065 7.24906C21.8923 6.88372 21.2604 6.92332 20.8951 7.3375C20.5297 7.75168 20.5693 8.38361 20.9835 8.74894C21.6083 9.30007 22 10.1038 22 11V15C22 16.6567 20.6567 18 19 18H10C8.34328 18 7 16.6567 7 15V11Z" fill="black"></path></svg><div class="css-16kvgc5 e1yswbpi1">Copied</div></button><button aria-label="Toggle dark and light mode" class="css-1yxfb37 e1yswbpi2"><div class="css-jmdf3f e1yswbpi3"></div><style data-emotion-css="mslqme">.css-mslqme{position:absolute;right:-1px;top:-8px;height:24px;width:24px;border-radius:50%;border:0;background:var(--theme-ui-colors-background,#fafafa);-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);-webkit-transition:transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}</style><div class="css-mslqme e1yswbpi4"></div></button></div></div><style data-emotion-css="1j2ibf0">.css-1j2ibf0{position:relative;padding:160px 0 35px;padding-left:68px;-webkit-transition:background 0.2s linear;transition:background 0.2s linear;}@media (max-width:66.875em){.css-1j2ibf0{padding-left:53px;}}@media (max-width:45.9375em){.css-1j2ibf0{padding:70px 0 80px;}}@media (max-width:33.75em){.css-1j2ibf0{padding:60px 0;}}</style><article class="css-1j2ibf0 eamsocw1"><style data-emotion-css="rb52af">.css-rb52af{position:relative;z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{margin:0 auto;}.css-rb52af h1,.css-rb52af h1 *,.css-rb52af h2,.css-rb52af h2 *{margin:25px auto 18px;}@media (max-width:45.9375em){.css-rb52af h1,.css-rb52af h1 *,.css-rb52af h2,.css-rb52af h2 *{margin:30px auto 18px;}}.css-rb52af h3,.css-rb52af h3 *{margin:20px auto 10px;}.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{width:100%;max-width:680px;}@media (max-width:66.875em){.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{max-width:507px;}}@media (max-width:45.9375em){.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{max-width:486px;}}@media (max-width:33.75em){.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{padding:0 20px;}}.css-rb52af .prism-code{overflow:auto;width:100%;max-width:744px;margin:0 auto;padding:32px;font-size:13px;margin:15px auto 50px;border-radius:5px;font-family:"Operator Mono",Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;background:var(--theme-ui-colors-prism-background,#292c34);}.css-rb52af .prism-code .token-line{border-left:3px solid transparent;}.css-rb52af .prism-code .token-line .token{color:var(--theme-ui-colors-prism-token,#fff);}.css-rb52af .prism-code .token-line .language-javascript{color:var(--theme-ui-colors-prism-languageJavascript,#e8696b);}.css-rb52af .prism-code .token-line .javascript{color:var(--theme-ui-colors-prism-javascript,#e8696b);}.css-rb52af .prism-code .token-line .background{color:var(--theme-ui-colors-prism-background,#292c34);}.css-rb52af .prism-code .token-line .comment{color:var(--theme-ui-colors-prism-comment,#5e6a76);}.css-rb52af .prism-code .token-line .string{color:var(--theme-ui-colors-prism-string,#a8e2a8);}.css-rb52af .prism-code .token-line .var{color:var(--theme-ui-colors-prism-var,#b3bac5);}.css-rb52af .prism-code .token-line .number{color:var(--theme-ui-colors-prism-number,#e4854d);}.css-rb52af .prism-code .token-line .constant{color:var(--theme-ui-colors-prism-constant,#b3bac5);}.css-rb52af .prism-code .token-line .plain{color:var(--theme-ui-colors-prism-plain,#fff);}.css-rb52af .prism-code .token-line .doctype{color:var(--theme-ui-colors-prism-doctype,#e8696b);}.css-rb52af .prism-code .token-line .tag{color:var(--theme-ui-colors-prism-tag,#e8696b);}.css-rb52af .prism-code .token-line .keyword{color:var(--theme-ui-colors-prism-keyword,#d49fd4);}.css-rb52af .prism-code .token-line .boolean{color:var(--theme-ui-colors-prism-boolean,#ff5874);}.css-rb52af .prism-code .token-line .function{color:var(--theme-ui-colors-prism-function,#5F8DC3);}.css-rb52af .prism-code .token-line .parameter{color:var(--theme-ui-colors-prism-parameter,#F9965D);}.css-rb52af .prism-code .token-line .class-name{color:var(--theme-ui-colors-prism-className,#ffcf74);}.css-rb52af .prism-code .token-line .attr-name{color:var(--theme-ui-colors-prism-attrName,#bf87ba);}.css-rb52af .prism-code .token-line .attr-value{color:var(--theme-ui-colors-prism-attrValue,#a8e2a8);}.css-rb52af .prism-code .token-line .interpolation{color:var(--theme-ui-colors-prism-interpolation,#fff);}.css-rb52af .prism-code .token-line .punctuation{color:var(--theme-ui-colors-prism-punctuation,#5FA8AA);}.css-rb52af .prism-code .token-line .maybe-class-name{color:var(--theme-ui-colors-prism-maybe-class-name,#fff);}.css-rb52af .prism-code .token-line .property{color:var(--theme-ui-colors-prism-property,#80cbc4);}.css-rb52af .prism-code .token-line .property-access{color:var(--theme-ui-colors-prism-propertyAccess,#fff);}.css-rb52af .prism-code .token-line .namespace{color:var(--theme-ui-colors-prism-namespace,#b2ccd6);}.css-rb52af .prism-code .token-line .highlight{color:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));}.css-rb52af .prism-code .token-line .highlight-border{color:var(--theme-ui-colors-prism-highlightBorder,#e1bde2);}.css-rb52af .prism-code .token-line .dom{color:var(--theme-ui-colors-prism-dom,#5F8DC3);}.css-rb52af .prism-code .token-line .operator{color:var(--theme-ui-colors-prism-operator,#5FA8AA);}.css-rb52af .prism-code .number-line{display:inline-block;width:32px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;color:#dcd9e6;}@media (max-width:45.9375em){.css-rb52af .prism-code .number-line{opacity:0;width:0;}}.css-rb52af .prism-code .token-line.highlight-line{margin:0 -32px;padding:0 32px;background:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));border-left:3px solid var(--theme-ui-colors-prism-highlightBorder,#e1bde2);}@media (max-width:45.9375em){.css-rb52af .prism-code .token-line.highlight-line{margin:0 -20px;padding:0 20px;}}.css-rb52af .prism-code .operator + .maybe-class-name{color:#ffcf74 !important;}.css-rb52af .prism-code .plain ~ .operator{color:#5fa8aa !important;}@media (max-width:66.875em){.css-rb52af .prism-code{left:-26px;}}@media (max-width:45.9375em){.css-rb52af .prism-code{max-width:526px;padding:20px 20px;left:0;}}@media (max-width:33.75em){.css-rb52af .prism-code{-webkit-text-size-adjust:none;text-size-adjust:none;border-radius:0;margin:0 auto 25px;padding:25px 20px;overflow:initial;width:unset;max-width:unset;float:left;min-width:100%;overflow:initial;position:relative;}}.css-rb52af .gatsby-resp-image-background-image{display:none !important;}.css-rb52af img{display:inline-block;position:relative;max-width:100%;height:auto;z-index:0;margin:15px auto 50px;border-radius:5px;}@media (max-width:45.9375em){.css-rb52af img{margin:10px auto 45px;}}.css-rb52af div.Image__Small{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;max-width:100%;height:auto;z-index:0;margin:15px auto 50px;border-radius:5px;width:100%;max-width:680px;}@media (max-width:45.9375em){.css-rb52af div.Image__Small{margin:10px auto 45px;}}@media (max-width:66.875em){.css-rb52af div.Image__Small{max-width:507px;}}@media (max-width:45.9375em){.css-rb52af div.Image__Small{max-width:486px;margin:0 auto 25px;}}@media (max-width:33.75em){.css-rb52af div.Image__Small{padding:0 20px;}}.css-rb52af .Image__Container{text-align:center;}.css-rb52af img.Image__With-Shadow{box-shadow:0px 15px 60px rgba(0,0,0,0.15);}.css-rb52af div.Image__Medium{position:relative;margin:15px auto 50px;width:100%;max-width:1004px;}@media (max-width:80em){.css-rb52af div.Image__Medium{left:-34px;}}@media (max-width:66.875em){.css-rb52af div.Image__Medium{left:-26px;}}@media (max-width:45.9375em){.css-rb52af div.Image__Medium{border-radius:0;left:0;margin:0 auto 25px;}.css-rb52af div.Image__Medium img{border-radius:0;}}.css-rb52af div.Image__Large{position:relative;left:-68px;width:100vw;margin:25px auto 60px;pointer-events:none;}.css-rb52af div.Image__Large iframe{pointer-events:all;}.css-rb52af div.Image__Large img{border-radius:0;}@media (max-width:66.875em){.css-rb52af div.Image__Large{left:-53px;}}@media (max-width:45.9375em){.css-rb52af div.Image__Large{left:0;margin:0 auto 25px;}}</style><div class="css-rb52af evru3dd0"><style data-emotion-css="fkwewv">.css-fkwewv{word-break:keep-all;font-size:32px;line-height:1.333;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;}@media (max-width:66.875em){.css-fkwewv{font-size:21px;}}@media (max-width:45.9375em){.css-fkwewv{font-size:24px;line-height:1.45;}}@media (max-width:33.75em){.css-fkwewv{font-size:22px;}}</style><h2 id="들어가며" class="css-fkwewv efq1zb21">들어가며</h2><style data-emotion-css="8qp1bw">.css-8qp1bw{line-height:1.756;font-size:18px;color:var(--theme-ui-colors-articleText,#08080B);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);margin:0 auto 35px;width:100%;max-width:680px;}.css-8qp1bw b{font-weight:800;}@media (max-width:66.875em){.css-8qp1bw{max-width:507px;}}@media (max-width:45.9375em){.css-8qp1bw{max-width:486px;margin:0 auto 25px;}}@media (max-width:33.75em){.css-8qp1bw{padding:0 20px;}}</style><p class="css-8qp1bw e1yjj5wz0">안녕하세요. 셀러리컴퍼니의 팀장 터틀입니다.</p><p class="css-8qp1bw e1yjj5wz0">직고래 2.0.0버전 부터 알림 기능이 추가되었는데요, 이번 글에선 알림 기능을 어떤 식으로 구현했고 어떤 과정으로 리팩터링 했는지 다뤄보도록 하겠습니다.</p><h2 id="적용-사례" class="css-fkwewv efq1zb21">적용 사례</h2><p class="css-8qp1bw e1yjj5wz0">알림을 가장 먼저 적용한 곳은 찜 기능입니다. 누군가 나의 게시글을 찜한 경우 나에게 푸시알림을 보내주는 과정으로 진행되어야 합니다. 아래는 해당 기능의 코드입니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><style data-emotion-css="1chxjt6">.css-1chxjt6{position:absolute;right:22px;top:24px;padding:8px 12px 7px;border-radius:5px;color:#6f7177;-webkit-transition:background 0.3s ease;transition:background 0.3s ease;}.css-1chxjt6:hover{background:rgba(255,255,255,0.07);}.css-1chxjt6[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:2px solid var(--theme-ui-colors-accent,#6166DC);border-radius:5px;background:rgba(255,255,255,0.01);}@media (max-width:45.9375em){.css-1chxjt6{display:none;}}</style><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Service</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteService</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token comment">// 필드, 생성자 생략</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">        </span><span class="token annotation punctuation">@Transactional</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">FavoriteRequest</span><span class="token plain"> request</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">                </span><span class="token comment">// 찜 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> favorite </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token function">getArticleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> saved </span><span class="token operator">=</span><span class="token plain"> favoriteRepository</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token plain">favorite</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">10</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">11</span><span class="token plain">                </span><span class="token comment">// 알림 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">12</span><span class="token plain">                </span><span class="token class-name">Article</span><span class="token plain"> article </span><span class="token operator">=</span><span class="token plain"> articleViewService</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token function">getArticleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">13</span><span class="token plain">                </span><span class="token class-name">NotificationHandler</span><span class="token plain"> handler </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">NotificationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">14</span><span class="token plain">                handler</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">15</span><span class="token plain">                        article</span><span class="token punctuation">.</span><span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPushToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">16</span><span class="token plain">                        loginMember</span><span class="token punctuation">.</span><span class="token function">getNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">17</span><span class="token plain">                </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">18</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">19</span><span class="token plain">                </span><span class="token keyword">return</span><span class="token plain"> saved</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">20</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">21</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">Favorite 객체를 생성한 후 저장합니다.</p><p class="css-8qp1bw e1yjj5wz0">그 다음 찜 대상이 되는 게시물을 통해 글쓴이의 PushToken을 알아냅니다.</p><p class="css-8qp1bw e1yjj5wz0">마지막으로 NotificationHandler의 <code class="css-0">send()</code>를 통해 알림이 전송됩니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">NotificationHandler</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">void</span><span class="token plain"> </span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token plain"> pushToken</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> sender</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">                </span><span class="token comment">// 메시지를 만들고 알림을 전송하는 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="불편했던-점" class="css-fkwewv efq1zb21">불편했던 점</h2><p class="css-8qp1bw e1yjj5wz0">기능은 동작했지만, 두 가지의 불편한 점이 있어서 리팩터링이 필요하다고 느꼈습니다.</p><style data-emotion-css="1smg95t">.css-1smg95t{list-style:none;counter-reset:list;color:var(--theme-ui-colors-articleText,#08080B);position:relative;padding:15px 0 30px 30px;margin:0 auto;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);font-size:18px;width:100%;max-width:680px;}@media (max-width:66.875em){.css-1smg95t{max-width:507px;}}@media (max-width:45.9375em){.css-1smg95t{max-width:486px;padding-left:0px;}}@media (max-width:33.75em){.css-1smg95t{padding-left:20px;}}.css-1smg95t li{position:relative;padding-bottom:15px;}@media (max-width:45.9375em){.css-1smg95t li{padding-left:30px;}}@media (max-width:33.75em){.css-1smg95t li{padding-left:30px;}}@media (max-width:45.9375em){.css-1smg95t li p{padding:0;}}.css-1smg95t li >:not(ol,ul){display:inline;}.css-1smg95t li::before{width:3rem;display:inline-block;position:absolute;color:var(--theme-ui-colors-articleText,#08080B);}.css-1smg95t li::before{counter-increment:list;content:counter(list) '.';font-weight:600;position:absolute;left:-3rem;top:-0.3rem;font-size:2rem;}@media (max-width:45.9375em){.css-1smg95t li::before{left:0;}}</style><ol class="css-1smg95t e3t4y0j0"><li class="css-0">Application layer(FavoriteService)에 알림 전송 로직 노출</li><li class="css-0">단일 트랜잭션</li></ol><style data-emotion-css="8fj7fw">.css-8fj7fw{word-break:keep-all;font-size:24px;line-height:1.45;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;}@media (max-width:45.9375em){.css-8fj7fw{font-size:22px;}}@media (max-width:33.75em){.css-8fj7fw{font-size:20px;}}</style><h3 id="application-layer에-로직-노출" class="css-8fj7fw efq1zb22">Application layer에 로직 노출</h3><p class="css-8qp1bw e1yjj5wz0">응용계층에 있는 서비스의 역할 중 하나는 도메인 객체들의 실행 흐름을 제어하는 것입니다. 단순한 흐름제어에서 벗어나 로직을 갖는 것은 도메인 객체의 응집력을 떨어뜨리고 결합도를 높이거나 코드를 재사용하게 만드는 원인이 됩니다.</p><p class="css-8qp1bw e1yjj5wz0">도메인 객체는 본인이 할 수 있는 로직(행위)을 갖고, 본인이 수행해야 합니다. 이것이 응집력입니다. 그렇지 않고 도메인 객체의 역할을 Service에서 해버린다면 해당 기능이 여러 Service에서 사용될 경우 해당 기능에 대한 코드가 재사용됩니다.</p><p class="css-8qp1bw e1yjj5wz0">앞선 코드에서 <code class="css-0">찜을 한 경우 알림을 보낸다</code>라는 요구사항으로 인해 FavoriteService에 알림을 보내는 로직이 있었습니다.  <code class="css-0">댓글을 단 경우 알림을 보낸다</code>라는 요구사항이 추가되었을 경우 CommentService같은 곳에 중복된 코드가 발생한다는 것이죠.</p><p class="css-8qp1bw e1yjj5wz0"><code class="css-0">send()</code>라는 메소드로 알림을 보내는 행위 자체는 NotificationHandler 객체가 갖도록 했지만 <strong class="css-0">알림을 전송한다</strong>는 <strong class="css-0">부가적인 로직이</strong> 알림이 필요한 Service 객체마다 추가되는 것이 불편했습니다.</p><h3 id="단일-트랜잭션" class="css-8fj7fw efq1zb22">단일 트랜잭션</h3><p class="css-8qp1bw e1yjj5wz0">다음은 트랜잭션 문제입니다. 게시글에 대한 찜은 정상적으로 동작했지만 알림이 실패한 경우 찜까지 롤백되는 것은 기대했던 동작이 아니였습니다.</p><p class="css-8qp1bw e1yjj5wz0">게시글을 찜하는 사용자에게는 <code class="css-0">찜이 되는지 안되는지</code>가 중요하고 글쓴이에게 알림이 가는지 안 가는지는 크게 중요하지 않습니다. 따라서 찜을 하는 로직과 알림이 보내지는 로직은 서로 다른 트랜잭션에서 진행되어야 했습니다. </p><h2 id="그렇다면-이벤트로-처리하는-것이-적절한가" class="css-fkwewv efq1zb21">그렇다면 이벤트로 처리하는 것이 적절한가?</h2><p class="css-8qp1bw e1yjj5wz0">처음 이벤트로 구현하는 것을 생각했을 땐 <code class="css-0">기능에 비해 과한 구현이 아닌가?</code> 라고 생각이 들었습니다. 마치 이벤트로 해야 하는 로직이 정해져 있는 것 처럼 생각해서 제가 구현하려는 Context가 적절한 예인지 고민했습니다.</p><p class="css-8qp1bw e1yjj5wz0">하지만 찾아볼 수록 생각보다 큰 범위에 이벤트를 적용할 수 있었습니다. 이벤트라는 것은 단순히 디자인 패턴 중 하나인 <style data-emotion-css="mckguv">.css-mckguv{-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);color:var(--theme-ui-colors-accent,#6166DC);}.css-mckguv:visited{color:var(--theme-ui-colors-accent,#6166DC);opacity:0.85;}.css-mckguv:hover,.css-mckguv:focus{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://en.wikipedia.org/wiki/Observer_pattern" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">옵저버패턴</a>인 것이죠. </p><p class="css-8qp1bw e1yjj5wz0">이벤트(옵저버 패턴)의 가장 큰 장점은 결합도가 줄어든다는 것입니다. 결합도가 줄어듬으로써 부가적인 장점이 생깁니다.</p><style data-emotion-css="1rpojxi">.css-1rpojxi{list-style:none;counter-reset:list;color:var(--theme-ui-colors-articleText,#08080B);position:relative;padding:15px 0 30px 30px;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);margin:0 auto;font-size:18px;width:100%;max-width:680px;}@media (max-width:66.875em){.css-1rpojxi{max-width:507px;}}@media (max-width:45.9375em){.css-1rpojxi{max-width:486px;padding-left:0px;}}@media (max-width:33.75em){.css-1rpojxi{padding-left:20px;}}.css-1rpojxi li{position:relative;padding-bottom:15px;}@media (max-width:45.9375em){.css-1rpojxi li{padding-left:30px;}}@media (max-width:33.75em){.css-1rpojxi li{padding-left:30px;}}@media (max-width:45.9375em){.css-1rpojxi li p{padding:0;}}.css-1rpojxi li >:not(ol,ul){display:inline;}.css-1rpojxi li::before{width:3rem;display:inline-block;position:absolute;color:var(--theme-ui-colors-articleText,#08080B);}.css-1rpojxi li::before{content:'';position:absolute;left:-30px;top:8px;height:8px;width:8px;background:var(--theme-ui-colors-articleText,#08080B);}@media (max-width:45.9375em){.css-1rpojxi li::before{left:0;}}</style><ul class="css-1rpojxi emayir50"><li class="css-0">객체간의 결합도를 줄인다.<ul class="css-1rpojxi emayir50"><li class="css-0">변경에 유연성이 생긴다.</li><li class="css-0">객체의 재사용성을 높여준다.</li><li class="css-0">테스트하기 편하다.</li><li class="css-0">단일 책임 원칙(SRP)을 더 잘 지키도록 해준다.</li></ul></li></ul><p class="css-8qp1bw e1yjj5wz0">하지만 결합도가 줄어든다는 것이 항상 장점으로 적용되는 것은 아닙니다.</p><ul class="css-1rpojxi emayir50"><li class="css-0">직접적인 결합이 없기 때문에 로직의 흐름을 파악하기 쉽지 않다.</li></ul><p class="css-8qp1bw e1yjj5wz0">로직이 한 곳에 있을 때와 달리, 이벤트를 발행하는 곳과 구독하는 곳을 봐야하는데, 이벤트가 많을 경우 상대적으로  로직이 한 곳에 있을 때 보다 흐름을 파악하기가 어렵습니다.</p><p class="css-8qp1bw e1yjj5wz0">하지만 알림과 찜 사이에 의존이 있을 필요가 없고 부가적인 장점이 더 크다고 생각해서 이벤트를 적용하기로 했습니다.</p><h2 id="applicationeventpublisher" class="css-fkwewv efq1zb21">ApplicationEventPublisher</h2><p class="css-8qp1bw e1yjj5wz0">가장 먼저 <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#context-functionality-events" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">ApplicationEventPublisher</a>를 사용했습니다. 공식 문서에 나와 있듯이, ApplicationEventPublisher는 옵저버 패턴의 구현체로 ApplicationContext가 상속받고 있는 인터페이스입니다. 따라서 Service 객체에서 별도의 주입 없이 의존성을 주입받을 수 있습니다.</p><p class="css-8qp1bw e1yjj5wz0">ApplicationEventPublisher를 사용해 다음과 같이 리팩터링 했습니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Service</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteService</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token keyword">private</span><span class="token plain"> </span><span class="token keyword">final</span><span class="token plain"> </span><span class="token class-name">ApplicationEventPublisher</span><span class="token plain"> eventPublisher</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token comment">// 나머지 필드, 생성자 생략</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token annotation punctuation">@Transactional</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">FavoriteRequest</span><span class="token plain"> request</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">                </span><span class="token comment">// 찜 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> favorite </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token function">getArticleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">10</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> saved </span><span class="token operator">=</span><span class="token plain"> favoriteRepository</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token plain">favorite</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">11</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">12</span><span class="token plain">                </span><span class="token comment">// 이벤트 발생 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">13</span><span class="token plain">                </span><span class="token class-name">Article</span><span class="token plain"> article </span><span class="token operator">=</span><span class="token plain"> articleViewService</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token function">getArticleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">14</span><span class="token plain">                eventPublisher</span><span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedEvent</span><span class="token punctuation">(</span><span class="token plain">favorite</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">15</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">16</span><span class="token plain">                </span><span class="token keyword">return</span><span class="token plain"> saved</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">17</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">18</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">코드를 얼핏 보면 별로 개선된 것이 없는데? 라고 생각하실 수도 있습니다. 하지만 지금은 부가적인 기능이 하나라서 그렇습니다. 현재는 다음과 같이 찜을 한 경우 알림만 발송하면 되죠.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Service</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteService</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token annotation punctuation">@Transactional</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">FavoriteRequest</span><span class="token plain"> request</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">                </span><span class="token comment">// 찜 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">                </span><span class="token comment">// 알림 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">하지만 요구사항이 추가되어 알림도 보내고, 메일도 보내고, 슬랙을 통해 알림도 보내줘야 한다면 어떨까요?</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Service</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteService</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token annotation punctuation">@Transactional</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">FavoriteRequest</span><span class="token plain"> request</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">                </span><span class="token comment">// 찜 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">                </span><span class="token comment">// 알림 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">                </span><span class="token comment">// 메일 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">                </span><span class="token comment">// 슬랙 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0"><code class="css-0">create()</code>가 하는 일이 점점 늘어나고 규모도 커지게 됩니다. 반면 이벤트를 사용한 경우엔 요구사항이 추가되어도 다음과 같습니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Service</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteService</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token annotation punctuation">@Transactional</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">FavoriteRequest</span><span class="token plain"> request</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">                </span><span class="token comment">// 찜 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">                </span><span class="token comment">// 이벤트 발생 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">이벤트를 구독하는 부분만 추가하면 되기 때문에 create는 간결하게 <code class="css-0">찜을 생성하는 흐름을 제어한다</code>는 Application layer의 역할만을 수행할 수 있게 됩니다.</p><h3 id="이벤트-객체" class="css-8fj7fw efq1zb22">이벤트 객체</h3><p class="css-8qp1bw e1yjj5wz0">이벤트 객체는 Spring 4.2 이전까지는 ApplicationEvent를 상속받아야 했지만 Spring 4.2부터는 순수한 자바 객체(POJO)를 이벤트 객체로 사용할 수 있습니다.</p><p class="css-8qp1bw e1yjj5wz0">스프링과 관련된 코드가 없는 POJO를 사용함으로써 단위테스트를 할 때 좀 더 편하고, 유지보수를 하기 더 쉬워진다는 장점이 있습니다.</p><p class="css-8qp1bw e1yjj5wz0">따라서 이벤트 객체의 코드는 다음과 같습니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedEvent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">    </span><span class="token keyword">private</span><span class="token plain"> </span><span class="token keyword">final</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token plain"> favorite</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token comment">// ... 메소드 생략</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h3 id="이벤트-처리" class="css-8fj7fw efq1zb22">이벤트 처리</h3><p class="css-8qp1bw e1yjj5wz0">이벤트 처리도 Spring 4.2 이전까지는 ApplicationListener를 상속받아야 했지만 Spring 4.2부터는 <code class="css-0">@EventListener</code> 애노테이션 기반으로 이벤트를 처리할 수 있습니다. 애노테이션만 달아주면 인자로 이벤트를 받아서 처리할 수 있는 것이죠.</p><p class="css-8qp1bw e1yjj5wz0">다만 애노테이션 기반으로 동작하기 때문에 빈으로 등록되어 있어야 합니다. 코드는 다음과 같습니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Component</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedListener</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">    </span><span class="token annotation punctuation">@EventListener</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">    </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">void</span><span class="token plain"> </span><span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token class-name">FavoriteCreatedEvent</span><span class="token plain"> event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">                </span><span class="token comment">// 이벤트를 처리(이벤트 객체를 가공해 알림을 전송)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">여기까지가 ApplicationEventPublisher를 사용한 구현입니다.</p><h2 id="transactionaleventlistener" class="css-fkwewv efq1zb21">@TransactionalEventListener</h2><p class="css-8qp1bw e1yjj5wz0">이벤트로 구현함으로써 <code class="css-0">Application layer에 로직 노출</code> 이라는 불편한 점은 어느정도 해소되었습니다. 하지만 <code class="css-0">단일 트랜잭션</code>이라는 불편한 점은 아직 남아있었습니다.</p><p class="css-8qp1bw e1yjj5wz0">이것은 <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/event/TransactionalEventListener.html" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">TransactionalEventListener</a>를 통해서 해결이 가능했습니다. </p><p class="css-8qp1bw e1yjj5wz0">TransactionalEventListener 역시 Spring 4.2부터 사용할 수 있으며 공식문서를 보면 다음과 같이 나와있습니다. <code class="css-0">An EventListener that is invoked according to a TransactionPhase.</code></p><p class="css-8qp1bw e1yjj5wz0">즉, TransactionalEventListener는 <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/event/TransactionPhase.html" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">TransactionPhase</a>에 따라 호출되는 이벤트 리스너입니다. TransactionPhase는 쉽게 말해 트랜잭션 이벤트를 적용하는 시점입니다. Enum 클래스이며 다음과 같은 필드를 갖고있습니다.</p><ul class="css-1rpojxi emayir50"><li class="css-0">BEFORE_COMMIT</li><li class="css-0">AFTER_COMMIT</li><li class="css-0">AFTER_ROLLBACK</li><li class="css-0">AFTER_COMPLETION</li></ul><p class="css-8qp1bw e1yjj5wz0">전 찜이 생성된 이후 알림을 보내면 되니 AFTER_COMMIT을 적용하면 됐습니다. 마침 default가 AFTER_COMMIT이라서 애노테이션만 지정해줬습니다. </p><p class="css-8qp1bw e1yjj5wz0">이로인해 최초의 NotificationHandler는 다음과 같이 변경됐습니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Component</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedListener</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">    </span><span class="token annotation punctuation">@TransactionalEventListener</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">    </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">void</span><span class="token plain"> </span><span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token class-name">FavoriteCreatedEvent</span><span class="token plain"> event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">                </span><span class="token comment">// 이벤트를 처리(이벤트 객체를 가공해 알림을 전송)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="domainevents와-abstractaggregateroot" class="css-fkwewv efq1zb21">@DomainEvents와 AbstractAggregateRoot</h2><p class="css-8qp1bw e1yjj5wz0">추가로 <code class="css-0">@DomainEvents</code>와 AbstractAggregateRoot로도 엔티티에서 이벤트를 구현할 수도 있습니다. <code class="css-0">@DomainEvents</code>와 AbstractAggregateRoot는 Spring Data 프로젝트에 있는 기능으로 Repository의 save메소드를 통해 저장할 때마다 자동으로 호출되는 이벤트입니다.</p><h3 id="이건-왜-존재하나" class="css-8fj7fw efq1zb22">이건 왜 존재하나?</h3><p class="css-8qp1bw e1yjj5wz0">엔티티에서 ApplicationEventPublisher 필드를 갖고 이벤트를 발생시킬 수도 있지만, 아쉽게도 <strong class="css-0">동작하지 않습니다.</strong></p><p class="css-8qp1bw e1yjj5wz0">일반적으로 빈은 스프링 IoC 컨테이너가 초기화될 때 생성됩니다. 하지만 엔티티의 경우 Spring Data에서 리플렉션 API를 통해 생성하기 때문에 필드로 갖고있는 ApplicationEventPublisher가 초기화되지 않습니다.</p><p class="css-8qp1bw e1yjj5wz0">쉽게 말해, 생성 시점이 달라서 ApplicationEventPublisher을 사용할 수 없습니다. 이것을 피하려면 항상 트랜잭션 내에서 메소드를 실행해야합니다. 요구사항은 언제 변경될 지 모르기 때문에 이러한 제약은 불편하게 느껴집니다.</p><p class="css-8qp1bw e1yjj5wz0">그렇기 때문에 Spring Data 프로젝트에서 기능을 제공하는 것입니다.</p><p class="css-8qp1bw e1yjj5wz0"><code class="css-0">@DomainEvents</code>와 AbstractAggregateRoot를 사용한다면 도메인 로직이 Application layer에 노출되지 않고 더욱 응집도가 높은 구현이 가능합니다.</p><h3 id="이벤트-객체-1" class="css-8fj7fw efq1zb22">이벤트 객체</h3><p class="css-8qp1bw e1yjj5wz0">도메인 이벤트의 경우 POJO를 이벤트 객체로 사용하진 못합니다. 대신 ApplicationEvent 클래스를 상속받아서 구현합니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedEvent</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">ApplicationEvent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">        </span><span class="token keyword">private</span><span class="token plain"> </span><span class="token keyword">final</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token plain"> favorite</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">    </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedEvent</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token plain"> source</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">        </span><span class="token keyword">super</span><span class="token punctuation">(</span><span class="token plain">source</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        favorite </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token class-name">Favorite</span><span class="token punctuation">)</span><span class="token plain">source</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h3 id="이벤트-처리-1" class="css-8fj7fw efq1zb22">이벤트 처리</h3><p class="css-8qp1bw e1yjj5wz0">이벤트 처리의 경우도 애노테이션이 아닌 ApplicationListener 인터페이스를 상속받아서 구현합니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Component</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedListener</span><span class="token plain"> </span><span class="token keyword">implements</span><span class="token plain"> </span><span class="token class-name">ApplicationListener</span><span class="token generics punctuation">&lt;</span><span class="token generics class-name">FavoriteCreatedEvent</span><span class="token generics punctuation">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token annotation punctuation">@Override</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">    </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">void</span><span class="token plain"> </span><span class="token function">onApplicationEvent</span><span class="token punctuation">(</span><span class="token class-name">FavoriteCreatedEvent</span><span class="token plain"> event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">                </span><span class="token comment">// 이벤트를 처리(이벤트 객체를 가공해 알림을 전송)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">이벤트 객체와 이벤트 처리 모두 상속받아서 구현하는 번거로움이 생겼습니다. 하지만 서비스에 있던 이벤트를 발생시키는 로직이 도메인 객체 안으로 이동했습니다.</p><p class="css-8qp1bw e1yjj5wz0">먼저 ApplicationEventPublisher를 사용할 때의 FavoriteService입니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Service</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteService</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token keyword">private</span><span class="token plain"> </span><span class="token keyword">final</span><span class="token plain"> </span><span class="token class-name">ApplicationEventPublisher</span><span class="token plain"> eventPublisher</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token comment">// 나머지 필드, 생성자 생략</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token annotation punctuation">@Transactional</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">FavoriteRequest</span><span class="token plain"> request</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">                </span><span class="token comment">// 찜 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> favorite </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token function">getArticleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">10</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> saved </span><span class="token operator">=</span><span class="token plain"> favoriteRepository</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token plain">favorite</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">11</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">12</span><span class="token plain">                </span><span class="token comment">// 이벤트 발생 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">13</span><span class="token plain">                </span><span class="token class-name">Article</span><span class="token plain"> article </span><span class="token operator">=</span><span class="token plain"> articleViewService</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token function">getArticleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">14</span><span class="token plain">                eventPublisher</span><span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedEvent</span><span class="token punctuation">(</span><span class="token plain">favorite</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">15</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">16</span><span class="token plain">                </span><span class="token keyword">return</span><span class="token plain"> saved</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">17</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">18</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">다음은 도메인 이벤트를 사용할 때의 FavoriteService입니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token annotation punctuation">@Service</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FavoriteService</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">        </span><span class="token comment">// 나머지 필드, 생성자 생략</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">        </span><span class="token annotation punctuation">@Transactional</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">FavoriteRequest</span><span class="token plain"> request</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">                </span><span class="token comment">// 찜 로직</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> favorite </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token function">getArticleId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> loginMember</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain">                </span><span class="token class-name">Favorite</span><span class="token plain"> saved </span><span class="token operator">=</span><span class="token plain"> favoriteRepository</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token plain">favorite</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">10</span><span class="token plain">                </span><span class="token keyword">return</span><span class="token plain"> saved</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">11</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">12</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">이벤트를 발생시키는 로직 마저 Favorite 객체의 <code class="css-0">create()</code>메소드로 이동했습니다.</p><div style="overflow:auto"><pre class="prism-code language-java" style="position:relative"><button data-a11y="false" class="css-1chxjt6 e1qvx6300">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">public</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">AbstractAggregateRoot</span><span class="token generics punctuation">&lt;</span><span class="token generics class-name">Favorite</span><span class="token generics punctuation">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">        </span><span class="token comment">// 필드, 메소드 생략</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token keyword">public</span><span class="token plain"> </span><span class="token class-name">Favorite</span><span class="token plain"> </span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">        </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">FavoriteCreatedEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw e1yjj5wz0">이로 인해 FavoriteService는 흐름만을 제어하도록 변경되었고, Favorite을 생성할때 발생하는 이벤트도 Favorite 객체 내에서 관리합니다.</p><h2 id="정리" class="css-fkwewv efq1zb21">정리</h2><p class="css-8qp1bw e1yjj5wz0">ApplicationEventPublisher를 사용할 경우 POJO로 이벤트 객체를 사용하고 애노테이션을 통해 간편하게 이벤트 처리가 가능했습니다. 하지만 Application layer에 로직이 생겨 도메인의 응집력이 떨어진다는 단점이 있었습니다.</p><p class="css-8qp1bw e1yjj5wz0">반면 도메인 이벤트를 사용할 경우 도메인은 AbstractAggregateRoot를 상속받고, 이벤트 객체는 ApplicationEvent, 이벤트 처리는 ApplicationListener를 상속받는다는 번거로움이 있었지만 도메인의 응집력이 더 높아진다는 장점이 있었습니다.</p><p class="css-8qp1bw e1yjj5wz0">정답은 없습니다. 요구사항과 주어진 환경에 맞게 적절한 방법을 사용하는 것이 베스트라고 생각합니다.</p><h2 id="출처" class="css-fkwewv efq1zb21">출처</h2><ul class="css-1rpojxi emayir50"><li class="css-0"><a href="https://www.baeldung.com/spring-events" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">https://www.baeldung.com/spring-events</a></li><li class="css-0"><a href="https://www.baeldung.com/spring-data-ddd" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">https://www.baeldung.com/spring-data-ddd</a></li><li class="css-0"><a href="https://dzone.com/articles/transaction-synchronization-and-spring-application" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">https://dzone.com/articles/transaction-synchronization-and-spring-application</a></li><li class="css-0"><a href="https://supawer0728.github.io/2018/03/24/spring-event/" target="_blank" rel="noreferrer" class="css-mckguv e1rq3iq70">https://supawer0728.github.io/2018/03/24/spring-event/</a></li></ul><style data-emotion-css="akmrme animation-1xhp7f5">.css-akmrme{position:absolute;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;width:225px;height:46px;padding:7px 11px 7px 19px;color:var(--theme-ui-colors-grey,#73737D);background:#000;border-radius:5px;font-size:18px;font-weight:600;-webkit-transition:left 75ms ease-out,right 75ms ease-out,background 200ms;transition:left 75ms ease-out,right 75ms ease-out,background 200ms;-webkit-animation:animation-1xhp7f5 200ms forwards;animation:animation-1xhp7f5 200ms forwards;}.css-akmrme::after{content:'';position:absolute;left:0;right:0;margin:0 auto;bottom:-8px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #000;-webkit-transition:border-color 200ms;transition:border-color 200ms;}.css-akmrme svg path{fill:#fff;}@-webkit-keyframes animation-1xhp7f5{0%{-webkit-transform:matrix(.97,0,0,1,0,12);-ms-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0;}20%{-webkit-transform:matrix(.99,0,0,1,0,2);-ms-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7;}40%{-webkit-transform:matrix(1,0,0,1,0,-1);-ms-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1;}70%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}100%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}}@keyframes animation-1xhp7f5{0%{-webkit-transform:matrix(.97,0,0,1,0,12);-ms-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0;}20%{-webkit-transform:matrix(.99,0,0,1,0,2);-ms-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7;}40%{-webkit-transform:matrix(1,0,0,1,0,-1);-ms-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1;}70%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}100%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}}</style><div style="position:absolute;left:0px;top:0px;display:none;pointer-events:none" class="css-akmrme e1ocrz2j0"><style data-emotion-css="12z0wuy">.css-12z0wuy{margin-right:8px;}</style><span class="css-12z0wuy e1ocrz2j1">Share: </span><style data-emotion-css="pd22cz">.css-pd22cz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 11px;cursor:pointer;}</style><a class="css-pd22cz e1ocrz2j3"><style data-emotion-css="18l3o48">.css-18l3o48{width:0px;height:0px;visibility:hidden;opacity:0;}</style><div class="css-18l3o48 e1ocrz2j2">Share the selected text</div><svg width="18px" height="15px" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.0658 2.34438C14.7013 1.96349 15.1892 1.3604 15.419 0.641811C14.8244 0.994439 14.1658 1.25056 13.4648 1.3886C12.9034 0.7905 12.1036 0.416748 11.2185 0.416748C9.51888 0.416748 8.14096 1.79461 8.14096 3.49411C8.14096 3.7353 8.16822 3.97019 8.22068 4.19542C5.66301 4.06708 3.39543 2.84191 1.8776 0.980064C1.6127 1.43458 1.46094 1.96322 1.46094 2.52719C1.46094 3.59485 2.00428 4.5368 2.83003 5.08865C2.32553 5.07268 1.85104 4.93425 1.43608 4.70376C1.43586 4.71659 1.43586 4.72949 1.43586 4.74244C1.43586 6.23349 2.49666 7.47732 3.90448 7.75999C3.64622 7.83033 3.37436 7.86792 3.09366 7.86792C2.89537 7.86792 2.70257 7.84866 2.51471 7.81272C2.90629 9.03537 4.0428 9.92509 5.38945 9.94994C4.33623 10.7753 3.00928 11.2673 1.56749 11.2673C1.31911 11.2673 1.07413 11.2528 0.833374 11.2243C2.19527 12.0975 3.81291 12.6069 5.55081 12.6069C11.2113 12.6069 14.3067 7.91763 14.3067 3.85096C14.3067 3.71753 14.3037 3.5848 14.2978 3.45285C14.899 3.01896 15.4208 2.47694 15.8334 1.8598C15.2815 2.10456 14.6884 2.26998 14.0658 2.34438Z" fill="white"></path></svg></a><a class="css-pd22cz e1ocrz2j3"><div class="css-18l3o48 e1ocrz2j2">Share the selected text</div><svg width="16px" height="16px" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.59615 13.125H0.871552V4.36523H3.59615V13.125ZM2.24847 3.16406C1.81878 3.16406 1.44769 3.00781 1.13519 2.69531C0.822692 2.38281 0.666443 2.01171 0.666443 1.58203C0.666443 1.15234 0.822692 0.781248 1.13519 0.468749C1.44769 0.156249 1.81878 0 2.24847 0C2.67816 0 3.04925 0.156249 3.36175 0.468749C3.67425 0.781248 3.8305 1.15234 3.8305 1.58203C3.8305 2.01171 3.67425 2.38281 3.36175 2.69531C3.04925 3.00781 2.67816 3.16406 2.24847 3.16406ZM13.7915 13.125H11.0669V8.84765C11.0669 8.14452 11.0083 7.63671 10.8911 7.32421C10.6763 6.79687 10.2563 6.5332 9.63134 6.5332C9.00634 6.5332 8.56689 6.76757 8.31298 7.23632C8.11767 7.58788 8.02001 8.10546 8.02001 8.78905V13.125H5.32471V4.36523H7.93212V5.5664H7.96142C8.15673 5.17578 8.46923 4.85351 8.89892 4.59961C9.36767 4.28711 9.91454 4.13086 10.5395 4.13086C11.8091 4.13086 12.6977 4.53125 13.2055 5.33203C13.5962 5.97656 13.7915 6.97265 13.7915 8.3203V13.125Z" fill="white"></path></svg></a><style data-emotion-css="1lnhvdd">.css-1lnhvdd{display:inline-block;height:17px;width:1px;position:relative;margin:0 8px;background:rgba(115,115,125,0.3);}</style><div class="css-1lnhvdd e1ocrz2j5"></div><style data-emotion-css="15hjez6">.css-15hjez6{display:inline-block;padding:16px 11px;}</style><button aria-label="Copy selected text" class="css-15hjez6 e1ocrz2j4"><svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#08080B"></path></svg></button></div></div></article><style data-emotion-css="npfbur">.css-npfbur{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;display:block;}@media (max-width:66.875em){.css-npfbur{max-width:850px;}}@media (max-width:45.9375em){.css-npfbur{padding:0 2rem;max-width:527px;}}@media (max-width:33.75em){.css-npfbur{max-width:100%;}}</style><section class="css-npfbur eamsocw2"><style data-emotion-css="1vgsxfa">.css-1vgsxfa{position:relative;opacity:0.25;margin-bottom:100px;font-weight:400;color:var(--theme-ui-colors-primary,#000);}@media (max-width:45.9375em){.css-1vgsxfa{margin-bottom:60px;}}.css-1vgsxfa::after{content:'';position:absolute;background:var(--theme-ui-colors-grey,#73737D);width:79.82456140350878%;height:1px;right:0;top:11px;}@media (max-width:45.9375em){.css-1vgsxfa::after{width:52.63157894736842%;}}@media (max-width:33.75em){.css-1vgsxfa::after{width:35.08771929824561%;}}@media (max-width:23.5em){.css-1vgsxfa::after{width:90px;}}</style><h3 class="css-1vgsxfa eamsocw3">More articles from <!-- -->Jikgorae</h3><style data-emotion-css="80jzpj">.css-80jzpj{position:relative;display:grid;grid-template-columns:1fr 457px;grid-template-rows:2;-webkit-column-gap:30px;column-gap:30px;margin:0 auto;max-width:100%;}@media (max-width:66.875em){.css-80jzpj{grid-template-columns:1fr 1fr;}}@media (max-width:45.9375em){.css-80jzpj{grid-template-columns:1fr;}}</style><div class="css-80jzpj e1h0blpq0"><style data-emotion-css="1vg4mbv">.css-1vg4mbv{position:relative;display:block;width:100%;height:100%;top:0;left:0;z-index:1;-webkit-transition:-webkit-transform 0.33s var(--ease-out-quart);-webkit-transition:transform 0.33s var(--ease-out-quart);transition:transform 0.33s var(--ease-out-quart);-webkit-tap-highlight-color:rgba(255,255,255,0);}.css-1vg4mbv:hover .e1h0blpq1{-webkit-transform:translateY(-1px);-ms-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 50px 80px -20px rgba(0,0,0,0.27),0 30px 50px -30px rgba(0,0,0,0.3);}.css-1vg4mbv:hover h2,.css-1vg4mbv:focus h2{color:var(--theme-ui-colors-accent,#6166DC);}.css-1vg4mbv[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:3px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);}@media (max-width:33.75em){.css-1vg4mbv:hover .e1h0blpq1{-webkit-transform:none;-ms-transform:none;transform:none;box-shadow:initial;}.css-1vg4mbv:active{-webkit-transform:scale(0.97) translateY(3px);-ms-transform:scale(0.97) translateY(3px);transform:scale(0.97) translateY(3px);}}</style><a data-a11y="false" narrow="false" class="css-1vg4mbv e1h0blpq6" href="/refactoring-cqrs"><style data-emotion-css="1g2qwvh">.css-1g2qwvh{position:relative;}@media (max-width:540px){.css-1g2qwvh{box-shadow:0px 20px 40px rgba(0,0,0,0.2);border-bottom-right-radius:5px;border-bottom-left-radius:5px;background:var(--theme-ui-colors-card,#fff);}}</style><div class="css-1g2qwvh e1h0blpq2"><style data-emotion-css="f56zxy">.css-f56zxy{position:relative;height:280px;box-shadow:0 30px 60px -10px rgba(0,0,0,0.3),0 18px 36px -18px rgba(0,0,0,0.33);margin-bottom:30px;-webkit-transition:-webkit-transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);-webkit-transition:transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);transition:transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);}.css-f56zxy > div{height:100%;}@media (max-width:45.9375em){.css-f56zxy{height:220px;margin-bottom:35px;}}@media (max-width:33.75em){.css-f56zxy{height:200px;margin-bottom:0;box-shadow:none;overflow:hidden;border-top-right-radius:5px;border-top-left-radius:5px;}}</style><div class="css-f56zxy e1h0blpq1"><div class="css-133qvua eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:49.079754601226995%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACwElEQVQozx2S2UuUYRTGv4qCyi40rSwoUG+MlJDSoqwZNZ1xts+Z0c/ZnJnUUUvac4uahBbIijZbCNuVjKKgRVsokjYobLGVotQWrQutv+DXmbl4ObzPe855nvOcVzFrZWiBEO6V1ZhKfJjluMurKQ1WkWvTcHgCeCtqsLoCGBwuSgOVFHmCmIq9+CprUAVfoWpSX4XOXIRiE8BZVhF90KRJ+ep1uKS56g5glKLaTQ24giEsmk+wIGvrmgjWrJHmbpzeILUb6ymvXY9HRGhCpqjClm1Q2d96gq/9A3z91s/ufQekUSPf5P7+4ydevu4Tkiq6791n8PsP3n74yN6DrTTvbqHv3Xue975k05YwTt9KlIh0s+ZlZHSUzVubo2pNThe9r15z6nwHOWY7Dx8/4dr1WzzoeUR752UuXr7Kzdt36bh0hV9Dw2xsClPirxQ7Qih6SzEe8ejvv38YZYzMnEIy9fl8/vKF+vAO0hbrOd1+kZ7HT7nedZufv4YYGv4tozag+StoO3eB4d9/aDlwBLvbj2IpLZNFeHn2/IWoeiNFd1hX18jh4yfpHxjkgigaGRkVFdskp5dWwbvu3ONG9132HjpK55VrDAx+j9qklvpQIluOmB/Z3LG2M5zt6KTAaidLb5CkQ9ERI96Gd+1hS/NO7C4vhfYS8fAIoTUbOCPqm5p3kJWTHxWm5KkuCpweHP4QOdZi8uQsyzcKmxddoY0leUb8VatoCG9Hb1LJFbJso1W+iEPyS8jKs7DUWESmxPRlBpTU+QuZm5FJgVmlwFIUVac3WCQ6yNLlozPaWG6wkpGdG12Q3uRgkRRbXEFs3kqsngos7nLSs40kL9ChxMTPYlJcIuNi4hkbMxVlUhxjJsczJiaB8bGJTIibxcSE2UxJTGLKzBRi56QyLSWd+OS0aExImkecYNOT5zEjJY3/nGLIShgyI+gAAAAASUVORK5CYII=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/755714c84cf6cd55df031b70adce265a/ac59e/hero1.webp 163w,
/static/755714c84cf6cd55df031b70adce265a/7660b/hero1.webp 327w,
/static/755714c84cf6cd55df031b70adce265a/0acdf/hero1.webp 653w,
/static/755714c84cf6cd55df031b70adce265a/75470/hero1.webp 980w,
/static/755714c84cf6cd55df031b70adce265a/68d47/hero1.webp 1306w,
/static/755714c84cf6cd55df031b70adce265a/4521c/hero1.webp 1728w" sizes="(max-width: 653px) 100vw, 653px" /><source srcset="/static/755714c84cf6cd55df031b70adce265a/078a8/hero1.png 163w,
/static/755714c84cf6cd55df031b70adce265a/e56da/hero1.png 327w,
/static/755714c84cf6cd55df031b70adce265a/3ddd4/hero1.png 653w,
/static/755714c84cf6cd55df031b70adce265a/c5cc7/hero1.png 980w,
/static/755714c84cf6cd55df031b70adce265a/eebd2/hero1.png 1306w,
/static/755714c84cf6cd55df031b70adce265a/b0392/hero1.png 1728w" sizes="(max-width: 653px) 100vw, 653px" /><img loading="lazy" sizes="(max-width: 653px) 100vw, 653px" srcset="/static/755714c84cf6cd55df031b70adce265a/078a8/hero1.png 163w,
/static/755714c84cf6cd55df031b70adce265a/e56da/hero1.png 327w,
/static/755714c84cf6cd55df031b70adce265a/3ddd4/hero1.png 653w,
/static/755714c84cf6cd55df031b70adce265a/c5cc7/hero1.png 980w,
/static/755714c84cf6cd55df031b70adce265a/eebd2/hero1.png 1306w,
/static/755714c84cf6cd55df031b70adce265a/b0392/hero1.png 1728w" src="/static/755714c84cf6cd55df031b70adce265a/3ddd4/hero1.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><style data-emotion-css="1iwkho8">.css-1iwkho8{word-break:keep-all;font-size:24px;line-height:1.45;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;font-size:22px;line-height:1.4;margin-bottom:10px;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;-webkit-transition:color 0.3s ease-in-out;transition:color 0.3s ease-in-out;text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;}@media (max-width:45.9375em){.css-1iwkho8{font-size:22px;}}@media (max-width:33.75em){.css-1iwkho8{font-size:20px;}}@media (max-width:33.75em){.css-1iwkho8{-webkit-line-clamp:3;}}@media (max-width:45.9375em){.css-1iwkho8{margin-bottom:15px;}}@media (max-width:33.75em){.css-1iwkho8{padding:30px 20px 0;margin-bottom:10px;-webkit-line-clamp:3;}}</style><h3 class="css-1iwkho8 e1h0blpq3">리팩토링 일기 - CQRS</h3><style data-emotion-css="1rec7sy">.css-1rec7sy{text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;font-size:16px;margin-bottom:10px;color:var(--theme-ui-colors-grey,#73737D);display:box;max-width:515px;}@media (max-width:33.75em){.css-1rec7sy{-webkit-line-clamp:3;}}@media (max-width:66.875em){.css-1rec7sy{display:-webkit-box;}}@media (max-width:45.9375em){.css-1rec7sy{margin-bottom:15px;}}@media (max-width:33.75em){.css-1rec7sy{max-width:100%;padding:0 20px;margin-bottom:20px;-webkit-line-clamp:3;}}</style><p class="css-1rec7sy e1h0blpq4">안녕하세요. 셀러리 컴퍼니에서  직고래 를 개발하고 있는 코즈입니다. CQRS? Command Query Responsibility Segregation CQRS는 명령과 조회의 책임을 분리하는것 입니다. 흔히 CRUD라고 표현하는 작업중 R…</p><style data-emotion-css="118hiy6">.css-118hiy6{font-weight:600;font-size:16px;color:var(--theme-ui-colors-grey,#73737D);opacity:0.33;}@media (max-width:33.75em){.css-118hiy6{max-width:100%;padding:0 20px 30px;}}</style><div class="css-118hiy6 e1h0blpq5">September 6th, 2020<!-- --> · <!-- -->2<!-- --> min read</div> </div></a><style data-emotion-css="5u8a0y">.css-5u8a0y{position:relative;display:block;width:100%;height:100%;top:0;left:0;z-index:1;-webkit-transition:-webkit-transform 0.33s var(--ease-out-quart);-webkit-transition:transform 0.33s var(--ease-out-quart);transition:transform 0.33s var(--ease-out-quart);-webkit-tap-highlight-color:rgba(255,255,255,0);}.css-5u8a0y:hover .e1h0blpq1{-webkit-transform:translateY(-1px);-ms-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 50px 80px -20px rgba(0,0,0,0.27),0 30px 50px -30px rgba(0,0,0,0.3);}.css-5u8a0y:hover h2,.css-5u8a0y:focus h2{color:var(--theme-ui-colors-accent,#6166DC);}.css-5u8a0y[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:3px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);}@media (max-width:45.9375em){.css-5u8a0y{display:none;}}@media (max-width:33.75em){.css-5u8a0y:hover .e1h0blpq1{-webkit-transform:none;-ms-transform:none;transform:none;box-shadow:initial;}.css-5u8a0y:active{-webkit-transform:scale(0.97) translateY(3px);-ms-transform:scale(0.97) translateY(3px);transform:scale(0.97) translateY(3px);}}</style><a data-a11y="false" narrow="true" class="css-5u8a0y e1h0blpq6" href="/rest-api"><div class="css-1g2qwvh e1h0blpq2"><div class="css-f56zxy e1h0blpq1"><div class="css-133qvua eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:60.526315789473685%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABQ0lEQVQoz81TzU6DQBjs8/gUvXjzHTyaeDHxZNKrFxtPevUNPBnFFE2losYqMdZqe7ARBMtPgRj7hxXYHWGVQDVqD5o4yWSGb5cJfN9uDr+M3J8EUkoZScTwXbM+UfpFjRDClAUmZhL8tDdeZ1+oahp0TUX9KYRoDNB8HOHIHEKIvGR72G/3cR5pjPhZH/jgH/q4cDw4oxCN6zo87zn95fKBAF1uYa7qIr8tY4ZXUZAszFbaWL1ysHBqohhpKQqZ2mxh6cxCfkfBNCeD7wQ4Ke9BUdU08FAUcdtsYONuiGLNxmLVxPqNi7WIBakDTuuxsJWag+VLG/PHBrbue9hVu6g4PoQSh7ZupIGu68KyrKQTrNleQNB9CZmPERDKGINkehlbRVHg+/7nobxN+/thhDQNZfUP748dG5r1ExPjx+bf35RXRiWba2W8hPYAAAAASUVORK5CYII=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/5279f77365b992b5a22cd15fc8be77e6/31fce/hero.webp 114w,
/static/5279f77365b992b5a22cd15fc8be77e6/e3e25/hero.webp 229w,
/static/5279f77365b992b5a22cd15fc8be77e6/15384/hero.webp 457w,
/static/5279f77365b992b5a22cd15fc8be77e6/bdc9e/hero.webp 579w" sizes="(max-width: 457px) 100vw, 457px" /><source srcset="/static/5279f77365b992b5a22cd15fc8be77e6/f2e6d/hero.png 114w,
/static/5279f77365b992b5a22cd15fc8be77e6/4ddba/hero.png 229w,
/static/5279f77365b992b5a22cd15fc8be77e6/502b1/hero.png 457w,
/static/5279f77365b992b5a22cd15fc8be77e6/ced48/hero.png 579w" sizes="(max-width: 457px) 100vw, 457px" /><img loading="lazy" sizes="(max-width: 457px) 100vw, 457px" srcset="/static/5279f77365b992b5a22cd15fc8be77e6/f2e6d/hero.png 114w,
/static/5279f77365b992b5a22cd15fc8be77e6/4ddba/hero.png 229w,
/static/5279f77365b992b5a22cd15fc8be77e6/502b1/hero.png 457w,
/static/5279f77365b992b5a22cd15fc8be77e6/ced48/hero.png 579w" src="/static/5279f77365b992b5a22cd15fc8be77e6/502b1/hero.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><h3 class="css-1iwkho8 e1h0blpq3">리팩토링 일기 - REST API</h3><p class="css-1rec7sy e1h0blpq4">안녕하세요. 셀러리 컴퍼니에서  직고래 를 개발하고 있는 코즈입니다. Why REST? REST하지 못한 API를 마주할때가 있습니다. &quot;URI에 행동을 담으면 안돼!&quot;
&quot;왜?&quot;
&quot;어.. 그건 REST하지 않으니까...&quot; API…</p><div class="css-118hiy6 e1h0blpq5">September 1st, 2020<!-- --> · <!-- -->1<!-- --> min read</div> </div></a></div><style data-emotion-css="1xyudza">.css-1xyudza{margin-bottom:65px;}</style><div class="css-1xyudza eamsocw4"></div></section><style data-emotion-css="1hk9het">.css-1hk9het{position:absolute;bottom:0;left:0;width:100%;height:590px;z-index:0;pointer-events:none;background:var(--theme-ui-colors-gradient,linear-gradient(180deg,rgba(217,219,224,0) 0%,#D9DBE0 100%));-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}</style><div class="css-1hk9het evfwhe53"></div><style data-emotion-css="4j05o4">.css-4j05o4{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;}@media (max-width:66.875em){.css-4j05o4{max-width:850px;}}@media (max-width:45.9375em){.css-4j05o4{padding:0 2rem;max-width:527px;}}@media (max-width:33.75em){.css-4j05o4{max-width:100%;}}</style><section class="css-4j05o4 e7po90t0"><style data-emotion-css="1nedy0r">.css-1nedy0r{position:relative;margin:140px auto 50px;border-bottom:1px solid var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));}@media (max-width:45.9375em){.css-1nedy0r{margin:60px auto;}}@media (max-width:33.75em){.css-1nedy0r{display:none;}}</style><div class="css-1nedy0r evfwhe51"></div><style data-emotion-css="1d54ci6">.css-1d54ci6{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:80px;color:var(--theme-ui-colors-grey,#73737D);}@media (max-width:45.9375em){.css-1d54ci6{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-bottom:100px;}}@media (max-width:33.75em){.css-1d54ci6{padding-bottom:50px;}}</style><div class="css-1d54ci6 evfwhe50"><style data-emotion-css="1pt7hv6">@media (max-width:45.9375em){.css-1pt7hv6{margin-bottom:80px;}}@media (max-width:33.75em){.css-1pt7hv6{margin:120px auto 100px;}}</style><div class="css-1pt7hv6 evfwhe52">© <!-- -->2020<!-- --> <!-- -->Jikgorae</div><div><style data-emotion-css="10tgu6b">.css-10tgu6b{position:relative;margin-left:3.2rem;-webkit-text-decoration:none;text-decoration:none;max-width:16px;}.css-10tgu6b:hover svg:hover *{fill:var(--theme-ui-colors-primary,#000);}.css-10tgu6b:hover svg *{-webkit-transition:fill 0.25s var(--ease-in-out-quad);transition:fill 0.25s var(--ease-in-out-quad);}.css-10tgu6b:first-of-type{margin-left:0;}.css-10tgu6b:last-child{margin-right:0;}.css-10tgu6b[data-a11y='true']:focus::after{content:'';position:absolute;left:-50%;top:-20%;width:200%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}@media (max-width:45.9375em){.css-10tgu6b{margin:0 2.2rem;}}</style><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://github.com/seller-lee" href="https://github.com/seller-lee" class="css-10tgu6b e1gxho1u0"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0C3.1325 0 0 3.21173 0 7.17706C0 10.3529 2.00375 13.0353 4.78625 13.9863C5.13625 14.0491 5.2675 13.8338 5.2675 13.6454C5.2675 13.4749 5.25875 12.9097 5.25875 12.3087C3.5 12.6406 3.045 11.8691 2.905 11.4653C2.82625 11.259 2.485 10.622 2.1875 10.4516C1.9425 10.317 1.5925 9.98508 2.17875 9.97611C2.73 9.96714 3.12375 10.4964 3.255 10.7118C3.885 11.7973 4.89125 11.4923 5.29375 11.3039C5.355 10.8374 5.53875 10.5234 5.74 10.3439C4.1825 10.1645 2.555 9.54549 2.555 6.80026C2.555 6.01976 2.82625 5.37382 3.2725 4.87143C3.2025 4.692 2.9575 3.95635 3.3425 2.96951C3.3425 2.96951 3.92875 2.78111 5.2675 3.70516C5.8275 3.54367 6.4225 3.46293 7.0175 3.46293C7.6125 3.46293 8.2075 3.54367 8.7675 3.70516C10.1063 2.77214 10.6925 2.96951 10.6925 2.96951C11.0775 3.95635 10.8325 4.692 10.7625 4.87143C11.2087 5.37382 11.48 6.01079 11.48 6.80026C11.48 9.55446 9.84375 10.1645 8.28625 10.3439C8.54 10.5682 8.75875 10.9988 8.75875 11.6717C8.75875 12.6316 8.75 13.4032 8.75 13.6454C8.75 13.8338 8.88125 14.0581 9.23125 13.9863C11.9963 13.0353 14 10.3439 14 7.17706C14 3.21173 10.8675 0 7 0Z" fill="#73737D"></path></svg><style data-emotion-css="mglztx">.css-mglztx{width:0px;height:0px;visibility:hidden;opacity:0;overflow:hidden;display:inline-block;}</style><span class="css-mglztx e1gxho1u1">Link to $<!-- -->https://github.com/seller-lee</span></a></div></div></section></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/notification-service";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-e5eed695ab14f22c8faf.js"],"app":["/app-a80bd43fd08f08e96ede.js"],"component---src-narative-gatsby-theme-novela-templates-article-template-tsx":["/component---src-narative-gatsby-theme-novela-templates-article-template-tsx-ac32e6317640f5d0a7d7.js"],"component---src-narative-gatsby-theme-novela-templates-articles-template-tsx":["/component---src-narative-gatsby-theme-novela-templates-articles-template-tsx-41c2501ff569666630b8.js"],"component---src-narative-gatsby-theme-novela-templates-author-template-tsx":["/component---src-narative-gatsby-theme-novela-templates-author-template-tsx-3765f032d42829f96a58.js"],"component---src-pages-404-js":["/component---src-pages-404-js-4a8e525af545b314e321.js"]};/*]]>*/</script><script src="/polyfill-e5eed695ab14f22c8faf.js" nomodule=""></script><script src="/component---src-narative-gatsby-theme-novela-templates-article-template-tsx-ac32e6317640f5d0a7d7.js" async=""></script><script src="/d59818a277a63e94f3957e3702ab9a81b507562b-26408c2c92434787bfd3.js" async=""></script><script src="/commons-a609edef06c7fdd2acf9.js" async=""></script><script src="/044b48a8-21ca9a5926eae6d84c26.js" async=""></script><script src="/styles-c2fe8482057191dca484.js" async=""></script><script src="/app-a80bd43fd08f08e96ede.js" async=""></script><script src="/532a2f07-e098f9f49d7a6a9ea439.js" async=""></script><script src="/framework-4c4e0d69aebda0f2dfad.js" async=""></script><script src="/webpack-runtime-0d172aad282cdfaa4c43.js" async=""></script></body></html>